!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).GW=n.GW||{})}(this,(function(n){"use strict";var t={colorStart:"Ω",colorEnd:"∆",field:"§",defaultFg:null,defaultBg:null},e={eachColor:()=>{},default:(n,t,e)=>void 0!==e?`${e}.!!${n}!!`:`!!${n}!!`};function r(n,t){e[n]=t}function o(n){return()=>n}function i(n){if(!n||0==n.length)return 0;let e=0;const r=t.colorStart,o=t.colorEnd;for(let t=0;t<n.length;++t){const i=n[t];if(i==r){t=n.indexOf(r,t+1)}else i==o||++e}return e}function l(n,e,r){const o=t.colorStart,i=t.colorEnd;let l=e;for(;r>0;){const t=n[l];if(t===o){for(++l;n[l]!==o;)++l;++l}else t===i?(n[l+1]===i&&(--r,++l),++l):(--r,++l)}return l}function f(n,e){const r=t.colorStart,o=t.colorEnd;let i=e,l=0,f=!0;for(;i<n.length;){const t=n[i];if(" "==t){for(;" "==n[i+1];)++i;return[i,l]}if("-"==t)return[i,l];if("\n"==t)return[i,l];if(t!=r)t!=o?(l+=f?1:0,++i):(n[i+1]==o&&(l+=1,++i),i++);else{if(n[i+1]==r&&f){l+=1,i+=2;continue}f=!f,++i}}return[i,l]}function u(n,t,e,r=""){return n.substring(0,t)+r+n.substring(t+e)}function c(n,t,e,r,o,i){if(o+1>2*t)throw new Error("Cannot hyphenate - word length > 2 * width");if((i<4||i+t<o)&&(n=u(n,e-1,1,"\n"),i=t),i+t>o){return[n=u(n,l(n,e,Math.min(Math.floor(o/2),i-1)),0,"-\n"),r+2]}if(t>=o)return[n,r];return[n=u(n,l(n,e,Math.min(o,t-1)),0,"-\n"),r+2]}function s(n,t,e=0){if(n.length<t)return n;if(i(n)<t)return n;let r=t;t-=e;let o=n,l=!0,s=-1;for(;s<o.length;){let[n,e]=f(o,s+(l?1:0)),i=!1;if("-"==o[n]&&(n++,e++,i=!0),e>t)[o,n]=c(o,t,s+1,n,e,r);else if(e==r){const e=i?0:1;o=u(o,n,e,n<o.length?"\n":""),n+=1-e,r=t}else if(e>r){const f=l?1:0;o=u(o,s,f,"\n"),n+=1-f;r=t-e-(i?0:1)}else{r-=e+(i?0:1)}l=!i,s=n}return o}var d={__proto__:null,compile:function(n){const r=t.field,i=n.split(r).map(((n,t)=>t%2==0?o(n):0==n.length?o(r):function(n){const t=/((\w+) )?(\w+)(\.(\w+))?(%[\+\.\-\d]*[dsf])?/.exec(n)||[],r=t[2],o=t[3],i=t[5],l=t[6];let f=(u=o,function(n){const t=e[u];if(t)return t(u,n);const r=n[u];return void 0!==r?r:e.default(u,n)});var u;i&&i.length&&(f=function(n,t){return function(r){const o=t(r);if(!o)return e.default(n,r,o);const i=o[n];return void 0===i?e.default(n,r,o):i}}(i,f));r&&r.length&&(f=function(n,t){const r=e[n]||e.default;if(!t)return function(t){return r(n,t,void 0)};return function(e){const o=t(e);return r(n,e,o)}}(r,f));l&&l.length&&(l.endsWith("s")?f=function(n,t){const e=/%(-?\d*)s/.exec(n)||[],r=Number.parseInt(e[1]||"0");return function(n){let e=""+t(n);return r<0?e=e.padEnd(-r):r&&(e=e.padStart(r)),e}}(l,f):l.endsWith("d")?f=function(n,t){const e=/%([\+-]*)(\d*)d/.exec(n)||[];let r=Number.parseInt(e[2]||"0");const o=e[1].includes("+"),i=e[1].includes("-");return function(n){const e=Number.parseInt(t(n)||0);let l=""+e;return e>0&&o&&(l="+"+l),r&&i?l.padEnd(r):r?l.padStart(r):l}}(l,f):l.endsWith("f")&&(f=function(n,t){const e=/%([\+-]*)(\d*)(\.(\d+))?f/.exec(n)||[];let r=Number.parseInt(e[2]||"0");const o=e[1].includes("+"),i=e[1].includes("-"),l=Number.parseInt(e[4])||0;return function(n){const e=Number.parseFloat(t(n)||0);let f;return f=l?e.toFixed(l):""+e,e>0&&o&&(f="+"+f),r&&i?f.padEnd(r):r?f.padStart(r):f}}(l,f)));return f}(n)));return function(n={}){return i.map((t=>t(n))).join("")}},eachChar:function(n,r,o,i){if(!(n=""+n)||0==n.length)return;const l=[],f=e.eachColor,u={fg:void 0===o?t.defaultFg:o,bg:void 0===i?t.defaultBg:i},c=t.colorStart,s=t.colorEnd;f(u);let d=0;for(let t=0;t<n.length;++t){const e=n[t];if(e==c){let e=t+1;for(;e<n.length&&n[e]!=c;)++e;if(e==n.length)return console.warn("Reached end of string while seeking end of color start section."),console.warn("- text:",n),void console.warn("- start @:",t);if(e!=t+1){l.push([u.fg,u.bg]);const r=n.substring(t+1,e).split("|");u.fg=r[0]||u.fg,u.bg=r[1]||u.bg,f(u),t=e;continue}++t}else if(e==s){if(n[t+1]!=s){const n=l.pop();[u.fg,u.bg]=n||[null,null];continue}++t}r(e,u.fg,u.bg,d,t),++d}},length:i,padStart:function(n,t,e=" "){const r=n.length-i(n);return n.padStart(t+r,e)},padEnd:function(n,t,e=" "){const r=n.length-i(n);return n.padEnd(t+r,e)},center:function(n,t,e=" "){const r=n.length,o=t-i(n);if(o<=0)return n;const l=Math.floor(o/2);return n.padStart(r+l,e).padEnd(r+o,e)},firstChar:function(n){const e=t.colorStart,r=t.colorEnd;let o=0;for(;o<n.length;){const t=n[o];if(t===e){if(n[o+1]===e)return e;for(++o;n[o]!==e;)++o;++o}else{if(t!==r)return t;if(n[o+1]===r)return r;++o}}return null},capitalize:function(n){const e=t.colorStart,r=t.colorEnd;let o=0;for(;o<n.length;){const t=n[o];if(t==e){for(++o;n[o]!=e&&o<n.length;)++o;++o}else{if(t!=r)return n.substring(0,o)+t.toUpperCase()+n.substring(o+1);for(++o;n[o]==e&&o<n.length;)++o}}return n},removeColors:function(n){const e=t.colorStart,r=t.colorEnd;let o="",i=0;for(let t=0;t<n.length;++t){const l=n[t];if(l===e){if(n[t+1]==e){++t;continue}for(o+=n.substring(i,t),++t;n[t]!=e&&t<n.length;)++t;i=t+1}else if(l===r){if(n[t+1]==r){++t;continue}o+=n.substring(i,t),i=t+1}}return 0==i?n:(o+=n.substring(i),o)},wordWrap:function(n,t,e=0){if(!t)throw new Error("Need string and width");return n.length<t||i(n)<t?n:-1==n.indexOf("\n")?s(n,t,e):n.split("\n").map(((n,r)=>s(n,t,r?e:0))).join("\n")},configure:function(n={}){n.helpers&&Object.entries(n.helpers).forEach((([n,t])=>{r(n,t)})),n.fg&&(t.defaultFg=n.fg),n.bg&&(t.defaultBg=n.bg),n.colorStart&&(t.colorStart=n.colorStart),n.colorEnd&&(t.colorEnd=n.colorEnd),n.field&&(t.field=n.field)},addHelper:r,options:t};n.text=d,Object.defineProperty(n,"__esModule",{value:!0})}));
//# sourceMappingURL=gw-text.min.js.map
